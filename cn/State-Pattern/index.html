<!DOCTYPE html><html lang="[&quot;zh-CN&quot;,&quot;en&quot;,&quot;default&quot;]" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>CSE116çš„å­¦ä¹ ç¬”è®°-Lec2-4:State Pattern | Tyson's blog</title><meta name="keywords" content="Scala,æ•™ç¨‹,CSE116"><meta name="author" content="Tyson Hu"><meta name="copyright" content="Tyson Hu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="å…³äºæˆ‘åœ¨CSE-116ä¸­çš„ç¬”è®°ï¼šState Pattern">
<meta property="og:type" content="article">
<meta property="og:title" content="CSE116çš„å­¦ä¹ ç¬”è®°-Lec2-4:State Pattern">
<meta property="og:url" content="https://tianzhe.me/cn/State-Pattern/index.html">
<meta property="og:site_name" content="Tyson&#39;s blog">
<meta property="og:description" content="å…³äºæˆ‘åœ¨CSE-116ä¸­çš„ç¬”è®°ï¼šState Pattern">
<meta property="og:locale">
<meta property="og:image" content="https://upload.wikimedia.org/wikipedia/commons/8/85/Scala_logo.png">
<meta property="article:published_time" content="2020-09-29T01:48:46.000Z">
<meta property="article:modified_time" content="2020-12-27T17:30:37.000Z">
<meta property="article:author" content="Tyson Hu">
<meta property="article:tag" content="Scala">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://upload.wikimedia.org/wikipedia/commons/8/85/Scala_logo.png"><link rel="shortcut icon" href="/img/favicon.jpeg"><link rel="canonical" href="https://tianzhe.me/cn/State-Pattern/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="E3ldS1S2QwwG6Wt7hTzCzP8cEsZe4qy7GuQn5C9D5Fk"/><meta name="baidu-site-verification" content="RZuOf3nNVc"/><meta name="bing_site_verification" content="E3ldS1S2QwwG6Wt7hTzCzP8cEsZe4qy7GuQn5C9D5Fk"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç°¡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'å¤©',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"ä½ å·²åˆ‡æ¢ä¸ºç¹ä½“","cht_to_chs":"ä½ å·²åˆ‡æ¢ä¸ºç®€ä½“","day_to_night":"ä½ å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼","night_to_day":"ä½ å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isAnchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'CSE116çš„å­¦ä¹ ç¬”è®°-Lec2-4:State Pattern',
  isPost: true,
  isHome: false,
  isHighlightShrink: undefined,
  isToc: true,
  postUpdate: '2020-12-27 12:30:37'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#212121')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.2.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">åŠ è½½ä¸­...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "/img/loading.gif" data-lazy-src="https://avatars1.githubusercontent.com/u/62329498?s=400&amp;u=20198ec972904a758bc5f6ba4888c5ac6b6270fb&amp;v=4" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">43</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">11</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">16</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ/Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ—¶é—´è½´/Arch</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾/Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»/Ctgy</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa-fw fas fa-comment-dots"></i><span> ç•™è¨€æ¿/MsgBoard</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> å¥½å‹/Frds</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äºğŸ‘´ / About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://upload.wikimedia.org/wikipedia/commons/8/85/Scala_logo.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Tyson's blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ/Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ—¶é—´è½´/Arch</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾/Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»/Ctgy</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa-fw fas fa-comment-dots"></i><span> ç•™è¨€æ¿/MsgBoard</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> å¥½å‹/Frds</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äºğŸ‘´ / About</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">CSE116çš„å­¦ä¹ ç¬”è®°-Lec2-4:State Pattern</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2020-09-29T01:48:46.000Z" title="å‘è¡¨äº 2020-09-28 21:48:46">2020-09-28</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2020-12-27T17:30:37.000Z" title="æ›´æ–°äº 2020-12-27 12:30:37">2020-12-27</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%AC%94%E8%AE%B0/">ç¬”è®°</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%AC%94%E8%AE%B0/CSE116/">CSE116</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%AC%94%E8%AE%B0/CSE116/Scala/">Scala</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">1.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>7åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="CSE116çš„å­¦ä¹ ç¬”è®°-Lec2-4:State Pattern"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">è¯„è®ºæ•°:</span><a href="/cn/State-Pattern/#post-comment"><span id="twikoo-count"><i class="fa-solid fa-spinner fa-spin"></i></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p><strong>State Pattern</strong>             </p>
<h1 id="Design-Patterns"><a href="#Design-Patterns" class="headerlink" title="Design Patterns"></a>Design Patterns</h1><ul>
<li><p>Approaches to common programming design problems</p>
</li>
<li><p>There are many design patterns</p>
<ul>
<li>Weâ€™ll only focus on the state pattern in this course</li>
<li>For more patterns, search â€œThe Gang of Fourâ€</li>
</ul>
</li>
<li><p>The Primary goal of design patterns is to simplify the Design and Maintainability of our programs</p>
</li>
<li><p>Applies Polymorphism</p>
</li>
<li><p>Every object contains state and behavior</p>
</li>
<li><p>We use state variables to change the state of an object and its behavior can depend on this state</p>
</li>
<li><p><strong>What if we want to significantly change the behavior of an object?</strong></p>
<ul>
<li>Use if statements?<ul>
<li>if(condition){someBehavior()}</li>
<li>else{completelyDifferentBehavior}</li>
</ul>
</li>
<li>This will work, but what about maintainability?</li>
</ul>
</li>
<li><p>What if we want mant different behaviors?</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(condition)&#123;</span><br><span class="line">    someBehavior()</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(otherCondition1)&#123;</span><br><span class="line">    otherBehavior1()</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(otherCondition2)&#123;</span><br><span class="line">    otherBehavior2()</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(otherCondition3)&#123;</span><br><span class="line">    otherBehavior3()</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    completelyDifferentBehavior()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>This would all be in a single method</p>
<ul>
<li>Hard to read</li>
<li>Hard to maintain</li>
<li>Need to re-test existing functionality each time a condition is added</li>
</ul>
</li>
<li><p>Letâ€™s try using the <strong>state pattern</strong> as an alternative</p>
</li>
<li><p>Instead of storing each behavior in the same class, we defer functionality to a state <strong>object</strong></p>
</li>
<li><p>Have a state variable containing the current state as an <strong>object</strong></p>
</li>
<li><p>Change the state as needed</p>
</li>
<li><p>Decisions made on type(Polymorphism) not value (Conditions)</p>
</li>
<li><p>Modularizes code</p>
<ul>
<li>More, but smallerm pieces of functionality</li>
</ul>
</li>
<li><p>Easy to add new features without breaking tested features</p>
</li>
<li><p>State is represented by an <strong>abstract class</strong> (or trait, interface)</p>
<ul>
<li>Defines the methods that can be called (API)</li>
</ul>
</li>
<li><p>Extend the state class for each concrete state</p>
<ul>
<li>One class for each possible state</li>
</ul>
</li>
<li><p>Each state will have a reference to the object to which it is attached</p>
<ul>
<li>Use this reference to access other state variables</li>
<li>Use this reference to change state</li>
</ul>
</li>
</ul>
<h1 id="State-Pattern-Example"><a href="#State-Pattern-Example" class="headerlink" title="State Pattern - Example"></a>State Pattern - Example</h1><ul>
<li><p>OK, but what does all that actually mean?</p>
</li>
<li><p>Letâ€™s use the cool-headed Bruce Banner as an example</p>
<ul>
<li>Bruce is a world-class scientist</li>
<li>Bruce can successfully drive a car</li>
<li>Bruce is not very helpful in a fight<br><img src= "/img/loading.gif" data-lazy-src="/cn/State-Pattern/image/drbanner.png" alt="Dr Banner"></li>
</ul>
</li>
<li><p>However, Make Bruce angry and heâ€™ll become The Incredible Hulk!</p>
<ul>
<li>Smashes cars</li>
<li>Great in a fight</li>
<li>Out of control!<br><img src= "/img/loading.gif" data-lazy-src="/cn/State-Pattern/image/hulk.png" alt="Hulk"></li>
</ul>
</li>
<li><p>One man</p>
</li>
<li><p>Two significantly different behaviors depending on his current state</p>
</li>
<li><p>To simulate Bruce in a program, we will create one BruceBanner class containing the behavior in both states</p>
</li>
<li><p>Bruce Banner can use cars and fight very differently depending on his state</p>
</li>
<li><p>Defer to a State object to determine how he behaves</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BruceBanner</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> state: <span class="type">State</span> = <span class="keyword">new</span> <span class="type">DrBanner</span>(<span class="keyword">this</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">makeAngry</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">this</span>.state.makeAngry()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">calmDown</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">this</span>.state.calmDown()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">useCar</span></span>(car: <span class="type">Car</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">this</span>.state.useCar(car)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fight</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">this</span>.state.fight()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Ceate State as an abstract class to define all the methods each state must contain(API)</p>
</li>
<li><p>Extend State for each possible concrete state</p>
</li>
<li><p>Implement the method for each state</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">State</span>(<span class="params">banner: <span class="type">BruceBanner</span></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">makeAngry</span></span>()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">calmDown</span></span>()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">yseCar</span></span>(car: <span class="type">Car</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fight</span></span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BruceBanner</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> state: <span class="type">State</span> = <span class="keyword">new</span> <span class="type">DrBanner</span>(<span class="keyword">this</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">makeAngry</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">this</span>.state.makeAngry()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">calmDown</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">this</span>.state.calmDown()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">useCar</span></span>(car: <span class="type">Car</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">this</span>.state.useCar(car)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fight</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">this</span>.state.fight()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DrBanner</span>(<span class="params">banner: <span class="type">BruceBanner</span></span>) <span class="keyword">extends</span> <span class="title">State</span>(<span class="params">banner</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">makeAngry</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">        banner.state = <span class="keyword">new</span> <span class="type">TheHulk</span>(banner)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">calmDown</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">        println(<span class="string">&quot;already calm&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">useCar</span></span>(car: <span class="type">Car</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">        car.drive(<span class="literal">false</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">fight</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">        println(<span class="string">&quot;this won&#x27;t end well&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TheHulk</span>(<span class="params">banner: <span class="type">BruceBnner</span></span>) <span class="keyword">extends</span> <span class="title">State</span>(<span class="params">banner</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">makeAngry</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">        println(<span class="string">&quot;already angry&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">calmDown</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">        banner.state = <span class="keyword">new</span> <span class="type">DrBanner</span>(banner)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">useCar</span></span>(car: <span class="type">Car</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">        car.smash()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">fight</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">        println(<span class="string">&quot;Hulk Smash!&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "/img/loading.gif" data-lazy-src="/cn/State-Pattern/image/StatePatternEx1.png" alt="StatePattern"><br><img src= "/img/loading.gif" data-lazy-src="/cn/State-Pattern/image/StatePatternEx2.png" alt="StatePattern"></p>
</li>
<li><p>With two states we could have easily used a single conditional and a boolean flag to store the state</p>
<ul>
<li>Arguably simpler than using the state pattern</li>
</ul>
</li>
<li><p>The true power of this pattern comes when we have more states</p>
</li>
<li><p>Meet Professor Hulk</p>
</li>
<li><p>Bruce Banner transformed as the Hulk with full control</p>
<ul>
<li>Can drive a car <strong>and</strong> is great in a fight</li>
</ul>
</li>
<li><p>To add the new state</p>
<ul>
<li>Create a new class and implement the State methods</li>
<li>Add a state transition to enter the new state</li>
</ul>
</li>
<li><p><strong>Did not modify any existing functionality!</strong></p>
</li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BruceBanner</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> state: <span class="type">State</span> = <span class="keyword">new</span> <span class="type">DrBanner</span>(<span class="keyword">this</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">makeAngry</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">this</span>.state.makeAngry()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">calmDown</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">this</span>.state.calmDown()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">useCar</span></span>(car: <span class="type">Car</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">this</span>.state.useCar(car)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fight</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">this</span>.state.fight()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProfessorHulk</span>(<span class="params">banner: <span class="type">BruceBanner</span></span>) <span class="keyword">extends</span> <span class="title">State</span>(<span class="params">banner</span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">makeAngry</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">        println(<span class="string">&quot;I&#x27;m always angry&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">calmDown</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">        println(<span class="string">&quot;OK&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">useCar</span></span>(car: <span class="type">Car</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">        car.drive(<span class="literal">true</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">fight</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">        println(<span class="string">&quot;Smash carefully&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "/img/loading.gif" data-lazy-src="/cn/State-Pattern/image/StatePatternEx3.png" alt="StatePattern"></p>
<ul>
<li><strong>State Diagrams</strong><ul>
<li>Visualize <strong>states</strong> and <strong>state transitions</strong></li>
<li>Very helpful while designing with the state pattern</li>
</ul>
</li>
<li>The state diagram for Bruch Banner is as follows</li>
</ul>
<p><img src= "/img/loading.gif" data-lazy-src="/cn/State-Pattern/image/SPDiagrams.png" alt="Diagrams"></p>
<h1 id="State-Pattern-Design"><a href="#State-Pattern-Design" class="headerlink" title="State Pattern - Design"></a>State Pattern - Design</h1><ul>
<li>Write your API<ul>
<li>What methods will change behavior depending on the current state of the obeject</li>
<li>Theses methods define your API and are declared in the State class</li>
</ul>
</li>
<li>Decide what states should exist<ul>
<li>Any situation where the behavior is different should be a new state</li>
</ul>
</li>
<li>Determine the transitions between states</li>
</ul>
<h1 id="Lecture-Question"><a href="#Lecture-Question" class="headerlink" title="Lecture Question"></a>Lecture Question</h1><p><strong>No Control Flow</strong> allowed for this lecture question! - Same rules as the Calculator&#x2F;Microwave HW<br>We will simulate some character behavior in a platforming game where the player can run, duck, and stand still  </p>
<ul>
<li>In a package named <strong>oop.platformer</strong> write a class named <strong>Player</strong> with the following functionality</li>
</ul>
<p><strong>Methods:</strong></p>
<ul>
<li>duck(): Unit<ul>
<li>Enters the ducking state. Cannot transition from running to ducking</li>
</ul>
</li>
<li>standStill(): Unit<ul>
<li>Enters the standing state</li>
</ul>
</li>
<li>run(): Unit<ul>
<li>Enters the running state. Cannot transition from ducking to running</li>
</ul>
</li>
<li>jumpHeight(): Int<ul>
<li>Returns 4 if ducking, 3 if standing, and 6 if running</li>
</ul>
</li>
<li>movementSpeed(): Int<ul>
<li>Returns 1 if ducking, 5 if standing, and 12 if running</li>
</ul>
</li>
</ul>
<p>The initial state of the Player is standing. The Player constructor takes no parameters</p>
<p><strong>Test</strong>         </p>
<ul>
<li>In the tests package, write a test suite named <strong>TestPlayer</strong> that will test all this functionality.<ul>
<li>Note: Only call the API methods while testing. Other methods&#x2F;variables you create will not exist in the grader submissions</li>
</ul>
</li>
</ul>
<p><strong>You cannot have any control flow in the code you submit, including your tests. If you have all your lecture questions in a single project, make sure you only submit your code for this LQ</strong>           </p>
<p>To complete this lecture question you are strongly encouraged to use the state pattern. It is possible to use different approaches, though using the state pattern will give you more practice for the HW              </p>
<p><img src= "/img/loading.gif" data-lazy-src="/cn/State-Pattern/image/lq24.png" alt="Lecture Question"></p>
<p><strong>Note:</strong> You may have to start a new project for this question. Any control flow in your zip file will cause an error even if itâ€™s in an unrelated package</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="https://tianzhe.me/">Tyson Hu</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://tianzhe.me/cn/State-Pattern/">https://tianzhe.me/cn/State-Pattern/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://tianzhe.me" target="_blank">Tyson's blog</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Scala/">Scala</a></div><div class="post_share"><div class="social-share" data-image="https://upload.wikimedia.org/wikipedia/commons/8/85/Scala_logo.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/cn/LO2-5-State-Pattern/"><img class="prev-cover" src= "/img/loading.gif" data-lazy-src="https://upload.wikimedia.org/wikipedia/commons/8/85/Scala_logo.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">CSE116çš„å­¦ä¹ ç¬”è®°-Lec2-5:State_Pattern</div></div></a></div><div class="next-post pull-right"><a href="/cn/JSON/"><img class="next-cover" src= "/img/loading.gif" data-lazy-src="https://upload.wikimedia.org/wikipedia/commons/8/85/Scala_logo.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">CSE116çš„å­¦ä¹ ç¬”è®°-Lec2-3:JSON</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/cn/Inheritance/" title="CSE116çš„å­¦ä¹ ç¬”è®° Lec2-1:Inheritance"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://upload.wikimedia.org/wikipedia/commons/8/85/Scala_logo.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-09-24</div><div class="title">CSE116çš„å­¦ä¹ ç¬”è®° Lec2-1:Inheritance</div></div></a></div><div><a href="/cn/JSON/" title="CSE116çš„å­¦ä¹ ç¬”è®°-Lec2-3:JSON"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://upload.wikimedia.org/wikipedia/commons/8/85/Scala_logo.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-09-28</div><div class="title">CSE116çš„å­¦ä¹ ç¬”è®°-Lec2-3:JSON</div></div></a></div><div><a href="/cn/LO2-5-State-Pattern/" title="CSE116çš„å­¦ä¹ ç¬”è®°-Lec2-5:State_Pattern"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://upload.wikimedia.org/wikipedia/commons/8/85/Scala_logo.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-12-27</div><div class="title">CSE116çš„å­¦ä¹ ç¬”è®°-Lec2-5:State_Pattern</div></div></a></div><div><a href="/cn/LO3-1-Sorting-Revisited/" title="CSE116çš„å­¦ä¹ ç¬”è®°-Lec3-1:Sorting_Revisited"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://upload.wikimedia.org/wikipedia/commons/8/85/Scala_logo.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-12-27</div><div class="title">CSE116çš„å­¦ä¹ ç¬”è®°-Lec3-1:Sorting_Revisited</div></div></a></div><div><a href="/cn/LO2-6-State-Pattern/" title="CSE116çš„å­¦ä¹ ç¬”è®°-Lec2-6:State_Pattern"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://upload.wikimedia.org/wikipedia/commons/8/85/Scala_logo.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-12-27</div><div class="title">CSE116çš„å­¦ä¹ ç¬”è®°-Lec2-6:State_Pattern</div></div></a></div><div><a href="/cn/LO3-2-More-Sorting/" title="CSE116çš„å­¦ä¹ ç¬”è®°-Lec3-2:More_Sorting"><img class="cover" src= "/img/loading.gif" data-lazy-src="https://upload.wikimedia.org/wikipedia/commons/8/85/Scala_logo.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-12-27</div><div class="title">CSE116çš„å­¦ä¹ ç¬”è®°-Lec3-2:More_Sorting</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> è¯„è®º</span></div><div id="comment-switch"><span class="first-comment">Twikoo</span><span class="switch-btn"></span><span class="second-comment">Valine</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "/img/loading.gif" data-lazy-src="https://avatars1.githubusercontent.com/u/62329498?s=400&amp;u=20198ec972904a758bc5f6ba4888c5ac6b6270fb&amp;v=4" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Tyson Hu</div><div class="author-info__description">ä¸€ä¸ªå› çªå‘å¥‡æƒ³è€Œåˆ›å»ºçš„åšå®¢</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">43</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">11</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">16</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Tyson-Hu"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Tyson-Hu" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="http://wpa.qq.com/msgrd?v=3&amp;uin=2535280450&amp;site=qq&amp;menu=yes" target="_blank" title="QQ"><i class="fab fa-qq"></i></a><a class="social-icon" href="https://www.instagram.com/tyson.hu/" target="_blank" title="Instagram"><i class="fab fa-instagram"></i></a><a class="social-icon" href="https://twitter.com/tysonhu_twr" target="_blank" title="Twitter"><i class="fab fa-twitter"></i></a><a class="social-icon" href="mailto:tianzheh@buffalo.edu" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">è¯„è®ºé¦–é€‰Twikooï¼Œå¦‚æœæ— æ³•ä½¿ç”¨æˆ–è€…å»¶è¿Ÿè¿‡é«˜å¯å°è¯•Valineã€‚é‚®ç®±å¤„å¡«å†™QQé‚®ç®±å³å¯è·å–QQå¤´åƒã€‚</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Design-Patterns"><span class="toc-number">1.</span> <span class="toc-text">Design Patterns</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#State-Pattern-Example"><span class="toc-number">2.</span> <span class="toc-text">State Pattern - Example</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#State-Pattern-Design"><span class="toc-number">3.</span> <span class="toc-text">State Pattern - Design</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Lecture-Question"><span class="toc-number">4.</span> <span class="toc-text">Lecture Question</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/en/Raft/" title="Consensus Algorithm - Raft"><img src= "/img/loading.gif" data-lazy-src="https://raft.github.io/logo/solo.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Consensus Algorithm - Raft"/></a><div class="content"><a class="title" href="/en/Raft/" title="Consensus Algorithm - Raft">Consensus Algorithm - Raft</a><time datetime="2023-05-02T13:57:01.000Z" title="å‘è¡¨äº 2023-05-02 09:57:01">2023-05-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/cn/algo-intro/" title="Leetcode åˆ·é¢˜å‰è¨€"><img src= "/img/loading.gif" data-lazy-src="https://repository-images.githubusercontent.com/408927712/1c5ce46e-266f-43f0-b543-75bf341239b5" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Leetcode åˆ·é¢˜å‰è¨€"/></a><div class="content"><a class="title" href="/cn/algo-intro/" title="Leetcode åˆ·é¢˜å‰è¨€">Leetcode åˆ·é¢˜å‰è¨€</a><time datetime="2022-08-08T05:12:58.000Z" title="å‘è¡¨äº 2022-08-08 01:12:58">2022-08-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/en/algo-intro/" title="Algorithm Introduction"><img src= "/img/loading.gif" data-lazy-src="https://repository-images.githubusercontent.com/408927712/1c5ce46e-266f-43f0-b543-75bf341239b5" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Algorithm Introduction"/></a><div class="content"><a class="title" href="/en/algo-intro/" title="Algorithm Introduction">Algorithm Introduction</a><time datetime="2022-08-08T01:39:11.000Z" title="å‘è¡¨äº 2022-08-07 21:39:11">2022-08-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/cn/LO3-6-Immutability/" title="CSE116çš„å­¦ä¹ ç¬”è®°-Lec3-6:Immutability"><img src= "/img/loading.gif" data-lazy-src="https://upload.wikimedia.org/wikipedia/commons/8/85/Scala_logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CSE116çš„å­¦ä¹ ç¬”è®°-Lec3-6:Immutability"/></a><div class="content"><a class="title" href="/cn/LO3-6-Immutability/" title="CSE116çš„å­¦ä¹ ç¬”è®°-Lec3-6:Immutability">CSE116çš„å­¦ä¹ ç¬”è®°-Lec3-6:Immutability</a><time datetime="2020-12-27T18:22:31.000Z" title="å‘è¡¨äº 2020-12-27 13:22:31">2020-12-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/cn/LO5-6-WebSocket-App/" title="CSE116çš„å­¦ä¹ ç¬”è®°-Lec5-6:WebSocket_App"><img src= "/img/loading.gif" data-lazy-src="https://upload.wikimedia.org/wikipedia/commons/8/85/Scala_logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CSE116çš„å­¦ä¹ ç¬”è®°-Lec5-6:WebSocket_App"/></a><div class="content"><a class="title" href="/cn/LO5-6-WebSocket-App/" title="CSE116çš„å­¦ä¹ ç¬”è®°-Lec5-6:WebSocket_App">CSE116çš„å­¦ä¹ ç¬”è®°-Lec5-6:WebSocket_App</a><time datetime="2020-12-27T17:50:56.000Z" title="å‘è¡¨äº 2020-12-27 12:50:56">2020-12-27</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By Tyson Hu</div><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">ç”Ÿè€Œä¸ºäººï¼Œæˆ‘å¾ˆæŠ±æ­‰</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç¹</button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="èŠå¤©"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>(()=>{
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://blog-twikoo-ten.vercel.app',
      region: '',
      onCommentLoaded: function () {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://blog-twikoo-ten.vercel.app',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      countELement.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const runFn = () => {
    init()
    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') {
      setTimeout(runFn,0)
      return
    } 
    getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(runFn)
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'xHCgzmchP05ijopdHb7G7Rwk-MdYXbMMI',
      appKey: 'WddDXWYJFaSRootb65gpWAFl',
      avatar: 'monsterid',
      serverURLs: 'https://xhcgzmch.api.lncldglobal.com',
      emojiMaps: {"2020":"https://i0.hdslb.com/bfs/emote/dc709fac0d361370bcf0d36d32adb97df7c95824.png","2021":"https://i0.hdslb.com/bfs/emote/14d8996128d46dabd3a2ed6c172c8af918d7a5d2.png","2022":"https://i0.hdslb.com/bfs/emote/a783df2ce72952c44004007462324bde4b092a0c.png","æ€»å† å†›":"https://i0.hdslb.com/bfs/emote/4edd5c6290a1b6c98c478177f4fffe69539639eb.png","é«˜è€ƒåŠ æ²¹":"https://i0.hdslb.com/bfs/emote/a795e57db00a3f08eb4e6d76842593789ef8e33f.png","å¾®ç¬‘":"https://i0.hdslb.com/bfs/emote/685612eadc33f6bc233776c6241813385844f182.png","å¾®ç¬‘-æ˜¥èŠ‚":"https://i0.hdslb.com/bfs/emote/f32e5d367c81fbb88b54d7fe46366de04fe4f38f.png","å¾®ç¬‘-æ„šäººèŠ‚":"https://i0.hdslb.com/bfs/emote/774d19d2416eb5b30ac66b02ac580b1b0ca92a80.png","å¾®ç¬‘-æ„šäººèŠ‚2":"https://i0.hdslb.com/bfs/emote/ff45294fbd469ed51eab492e15b8bc7f8e755f14.png","å£ç½©":"https://i0.hdslb.com/bfs/emote/3ad2f66b151496d2a5fb0a8ea75f32265d778dd3.png","doge":"https://i0.hdslb.com/bfs/emote/3087d273a78ccaff4bb1e9972e2ba2a7583c9f11.png","doge-æ˜¥èŠ‚":"https://i0.hdslb.com/bfs/emote/feb9abf68df628803ff69a244e744470c2b7e136.png","doge-åœ£è¯":"https://i0.hdslb.com/bfs/emote/1afb5eb96846e0876071eeecb47be95dbf55f08d.png","doge-æ„šäººèŠ‚":"https://i0.hdslb.com/bfs/emote/8ab62b33061d20bc27beec798a2f73c639e8bb6e.png","doge-æ„šäººèŠ‚2":"https://i0.hdslb.com/bfs/emote/94460b4e92163c4ca88684b1830ca182d56ddea7.png","å¦™å•Š":"https://i0.hdslb.com/bfs/emote/b4cb77159d58614a9b787b91b1cd22a81f383535.png","å¦™å•Š-æ˜¥èŠ‚":"https://i0.hdslb.com/bfs/emote/692f196da6a623a1634ea305618d37709c2c87f0.png","å¦™å•Š-åœ£è¯":"https://i0.hdslb.com/bfs/emote/1cdb10e4b6c6743a1ec96f1579e3ef3045a8f225.png","å¦™å•Š-æ„šäººèŠ‚":"https://i0.hdslb.com/bfs/emote/5675a5d2f3e7fb6b29db0ca8c7703237a18c4271.png","å¦™å•Š-æ„šäººèŠ‚2":"https://i0.hdslb.com/bfs/emote/7b55232e0733afe509d4ac6282d7e604f6f2064f.png","OK":"https://i0.hdslb.com/bfs/emote/4683fd9ffc925fa6423110979d7dcac5eda297f4.png","OK-æ˜¥èŠ‚":"https://i0.hdslb.com/bfs/emote/ad17fceba45996104c8b8e2e3f4efd7e2f588368.png","OK-åœ£è¯":"https://i0.hdslb.com/bfs/emote/75d1c99cce001d6d103a8fd406616be9f51621ab.png","OK-æ„šäººèŠ‚":"https://i0.hdslb.com/bfs/emote/76cc9da7f4a054cb02aad900f0ca3d3fda9c9667.png","OK-æ„šäººèŠ‚2":"https://i0.hdslb.com/bfs/emote/4ab30d0c384aa7fb112d6078777d46f73797869b.png","æ˜Ÿæ˜Ÿçœ¼":"https://i0.hdslb.com/bfs/emote/63c9d1a31c0da745b61cdb35e0ecb28635675db2.png","æ˜Ÿæ˜Ÿçœ¼-æ˜¥èŠ‚":"https://i0.hdslb.com/bfs/emote/f6f01068ac7f6548779b0e16daa61974f9299b17.png","æ˜Ÿæ˜Ÿçœ¼-åœ£è¯":"https://i0.hdslb.com/bfs/emote/195641c30c55f34f9cd82c5e5c32d66a425c7723.png","æ˜Ÿæ˜Ÿçœ¼-æ„šäººèŠ‚":"https://i0.hdslb.com/bfs/emote/270e85c95c1ad919848b415601ed3a879bd08127.png","æ˜Ÿæ˜Ÿçœ¼-æ„šäººèŠ‚2":"https://i0.hdslb.com/bfs/emote/99471a235923d29c00fa9fc46b82e74196f99722.png","è¾£çœ¼ç›":"https://i0.hdslb.com/bfs/emote/35d62c496d1e4ea9e091243fa812866f5fecc101.png","è¾£çœ¼ç›-æ˜¥èŠ‚":"https://i0.hdslb.com/bfs/emote/1ad7c9d351bd64332cc8520c165ee0b32a6e82fa.png","è¾£çœ¼ç›-åœ£è¯":"https://i0.hdslb.com/bfs/emote/8080adfe5acdfd0b6b09bd91db24ea7334ac7b44.png","è¾£çœ¼ç›-æ„šäººèŠ‚":"https://i0.hdslb.com/bfs/emote/65ed9509df4d509a1cdf22e75a6d3b708f4e9afb.png","è¾£çœ¼ç›-æ„šäººèŠ‚2":"https://i0.hdslb.com/bfs/emote/60fcc72634bc1d2ad612a18b46256d5d50804ca2.png","åƒç“œ":"https://i0.hdslb.com/bfs/emote/4191ce3c44c2b3df8fd97c33f85d3ab15f4f3c84.png","åƒç“œ-æ˜¥èŠ‚":"https://i0.hdslb.com/bfs/emote/fbd58fe2465d84d32f37800af0fe6f25711ef397.png","åƒç“œ-åœ£è¯":"https://i0.hdslb.com/bfs/emote/aa6a3022e47b441c7f84d02cacc063a728a561e0.png","åƒç“œ-æ„šäººèŠ‚":"https://i0.hdslb.com/bfs/emote/f05344578512ef18878de01d188657fbf81d31c8.png","åƒç“œ-æ„šäººèŠ‚2":"https://i0.hdslb.com/bfs/emote/39a3f88f2232bdd8b8116d952060c72fcf093b55.png","æ»‘ç¨½":"https://i0.hdslb.com/bfs/emote/d15121545a99ac46774f1f4465b895fe2d1411c3.png","æ»‘ç¨½-æ˜¥èŠ‚":"https://i0.hdslb.com/bfs/emote/e56b466b43dd6930756d5caf4c22bef4f963dd35.png","æ»‘ç¨½-åœ£è¯":"https://i0.hdslb.com/bfs/emote/5874276ea716d0e9797f827dcfca4332acf8f0de.png","æ»‘ç¨½-æ„šäººèŠ‚":"https://i0.hdslb.com/bfs/emote/e8c1b263949c2617e6395b190d185b2f8cdf0747.png","æ»‘ç¨½-æ„šäººèŠ‚2":"https://i0.hdslb.com/bfs/emote/1d44d848b82fe0fcbd4d6f23e3c4a26a0fe4f40f.png","å‘²ç‰™":"https://i0.hdslb.com/bfs/emote/b5a5898491944a4268360f2e7a84623149672eb6.png","å‘²ç‰™-æ˜¥èŠ‚":"https://i0.hdslb.com/bfs/emote/6ae3b1008d2fee7e15b5eb447b2ccff18e664b88.png","å‘²ç‰™-åœ£è¯":"https://i0.hdslb.com/bfs/emote/ae4395c1e29e9a2db0c9ccc4c0db05c414816e68.png","å‘²ç‰™-æ„šäººèŠ‚":"https://i0.hdslb.com/bfs/emote/299e5867bb79f42d8553023909f42e89707cb500.png","å‘²ç‰™-æ„šäººèŠ‚2":"https://i0.hdslb.com/bfs/emote/3688061f6a90c8559dc4663f4d4971ea27d0c014.png","æ‰“call":"https://i0.hdslb.com/bfs/emote/431432c43da3ee5aab5b0e4f8931953e649e9975.png","æ‰“call-æ˜¥èŠ‚":"https://i0.hdslb.com/bfs/emote/bf990016e43b7111cab4566dea194ba837a1a88f.png","æ‰“call-åœ£è¯":"https://i0.hdslb.com/bfs/emote/2b04dd2d0e55d978ee485e1f7f3c5e355493ab78.png","æ‰“call-æ„šäººèŠ‚":"https://i0.hdslb.com/bfs/emote/49240d8643d7702519fc4cc468e0003a7623c0e3.png","æ‰“call-æ„šäººèŠ‚2":"https://i0.hdslb.com/bfs/emote/7ffaa98f9f49489022815e38dbcb1a04677a8f13.png","æ­ªå˜´":"https://i0.hdslb.com/bfs/emote/4384050fbab0586259acdd170b510fe262f08a17.png","æ­ªå˜´-æ„šäººèŠ‚":"https://i0.hdslb.com/bfs/emote/6cc4c091d3f2cc540f64d8f10ffe516fd2f4ea2b.png","æ­ªå˜´-æ„šäººèŠ‚2":"https://i0.hdslb.com/bfs/emote/f24a5cd8e8400a3ab850ce68ac495fde66a03b64.png","è°ƒçš®":"https://i0.hdslb.com/bfs/emote/8290b7308325e3179d2154327c85640af1528617.png","è°ƒçš®-æ„šäººèŠ‚":"https://i0.hdslb.com/bfs/emote/a09481ceb0644f799d94805446fd52dce775b022.png","è°ƒçš®-æ„šäººèŠ‚2":"https://i0.hdslb.com/bfs/emote/0da0b2049a4f7b310e3992afbcb7367b81707824.png","è™å¹´":"https://i0.hdslb.com/bfs/emote/a062f5fa2bafe677e49b6963a2bbb11dd4fe1e11.png","ç‰›å¹´":"https://i0.hdslb.com/bfs/emote/9275275ff1f2659310648221107d20bc4970f106.png","è€é¼ ":"https://i0.hdslb.com/bfs/emote/8e6fb491eb1bb0d5862e7ec8ccf9a3da12b6c155.png","è±¹å¯Œ":"https://i0.hdslb.com/bfs/emote/3d1dbe52ea16e12ff7b1c371196f728a4097fb33.png","å—‘ç“œå­":"https://i0.hdslb.com/bfs/emote/28a91da1685d90124cfeead74622e1ebb417c0eb.png","å—‘ç“œå­-æ˜¥èŠ‚":"https://i0.hdslb.com/bfs/emote/d2f9910f2d6e52ead3bf1ee29754cd1176f5fc2e.png","ç¬‘å“­":"https://i0.hdslb.com/bfs/emote/c3043ba94babf824dea03ce500d0e73763bf4f40.png","æ‚è„¸-åœ£è¯":"https://i0.hdslb.com/bfs/emote/9af59557383770c398daac81583e6c4d27d83da7.png","ç¬‘å“­-æ˜¥èŠ‚":"https://i0.hdslb.com/bfs/emote/29ce59fb7f14351d195609ef297d30e336bdb240.png","è—ç‹":"https://i0.hdslb.com/bfs/emote/ba0937ef6f3ccca85e2e0047e6263f3b4da37201.png","è„¸çº¢":"https://i0.hdslb.com/bfs/emote/0922c375da40e6b69002bd89b858572f424dcfca.png","è„¸çº¢-æ—§":"https://i0.hdslb.com/bfs/emote/50cb2606c285614f5786bd387c4f00dff923c82b.png","è„±å•doge":"https://i0.hdslb.com/bfs/emote/bf7e00ecab02171f8461ee8cf439c73db9797748.png","ç»™å¿ƒå¿ƒ":"https://i0.hdslb.com/bfs/emote/1597302b98827463f5b75c7cac1f29ea6ce572c4.png","å˜Ÿå˜Ÿ":"https://i0.hdslb.com/bfs/emote/abd7404537d8162720ccbba9e0a8cdf75547e07a.png","å“¦å‘¼":"https://i0.hdslb.com/bfs/emote/362bded07ea5434886271d23fa25f5d85d8af06c.png","å–œæ¬¢":"https://i0.hdslb.com/bfs/emote/8a10a4d73a89f665feff3d46ca56e83dc68f9eb8.png","é…¸äº†":"https://i0.hdslb.com/bfs/emote/92b1c8cbceea3ae0e8e32253ea414783e8ba7806.png","å«Œå¼ƒ":"https://i0.hdslb.com/bfs/emote/de4c0783aaa60ec03de0a2b90858927bfad7154b.png","å¤§å“­":"https://i0.hdslb.com/bfs/emote/2caafee2e5db4db72104650d87810cc2c123fc86.png","å®³ç¾":"https://i0.hdslb.com/bfs/emote/9d2ec4e1fbd6cb1b4d12d2bbbdd124ccb83ddfda.png","ç–‘æƒ‘":"https://i0.hdslb.com/bfs/emote/b7840db4b1f9f4726b7cb23c0972720c1698d661.png","å–œæè€Œæ³£":"https://i0.hdslb.com/bfs/emote/485a7e0c01c2d70707daae53bee4a9e2e31ef1ed.png","å¥¸ç¬‘":"https://i0.hdslb.com/bfs/emote/bb84906573472f0a84cebad1e9000eb6164a6f5a.png","ç¬‘":"https://i0.hdslb.com/bfs/emote/81edf17314cea3b48674312b4364df44d5c01f17.png","å·ç¬‘":"https://i0.hdslb.com/bfs/emote/6c49d226e76c42cd8002abc47b3112bc5a92f66a.png","æƒŠè®¶":"https://i0.hdslb.com/bfs/emote/f8e9a59cad52ae1a19622805696a35f0a0d853f3.png","æ‚è„¸":"https://i0.hdslb.com/bfs/emote/6921bb43f0c634870b92f4a8ad41dada94a5296d.png","é˜´é™©":"https://i0.hdslb.com/bfs/emote/ba8d5f8e7d136d59aab52c40fd3b8a43419eb03c.png","å›§":"https://i0.hdslb.com/bfs/emote/12e41d357a9807cc80ef1e1ed258127fcc791424.png","å‘†":"https://i0.hdslb.com/bfs/emote/33ad6000d9f9f168a0976bc60937786f239e5d8c.png","æŠ é¼»":"https://i0.hdslb.com/bfs/emote/cb89184c97e3f6d50acfd7961c313ce50360d70f.png","å¤§ç¬‘":"https://i0.hdslb.com/bfs/emote/ca94ad1c7e6dac895eb5b33b7836b634c614d1c0.png","æƒŠå–œ":"https://i0.hdslb.com/bfs/emote/0afecaf3a3499479af946f29749e1a6c285b6f65.png","æ— è¯­":"https://i0.hdslb.com/bfs/emote/44667b7d9349957e903b1b62cb91fb9b13720f04.png","ç‚¹èµ":"https://i0.hdslb.com/bfs/emote/1a67265993913f4c35d15a6028a30724e83e7d35.png","é¼“æŒ":"https://i0.hdslb.com/bfs/emote/895d1fc616b4b6c830cf96012880818c0e1de00d.png","å°´å°¬":"https://i0.hdslb.com/bfs/emote/cb321684ed5ce6eacdc2699092ab8fe7679e4fda.png","çµé­‚å‡ºçª":"https://i0.hdslb.com/bfs/emote/43d3db7d97343c01b47e22cfabeca84b4251f35a.png","å§”å±ˆ":"https://i0.hdslb.com/bfs/emote/d2f26cbdd6c96960320af03f5514c5b524990840.png","å‚²å¨‡":"https://i0.hdslb.com/bfs/emote/010540d0f61220a0db4922e4a679a1d8eca94f4e.png","ç–¼":"https://i0.hdslb.com/bfs/emote/905fd9a99ec316e353b9bd4ecd49a5f0a301eabf.png","å†·":"https://i0.hdslb.com/bfs/emote/cb0ebbd0668640f07ebfc0e03f7a18a8cd00b4ed.png","ç”Ÿç—…":"https://i0.hdslb.com/bfs/emote/0f25ce04ae1d7baf98650986454c634f6612cb76.png","å“":"https://i0.hdslb.com/bfs/emote/9c10c5ebc7bef27ec641b8a1877674e0c65fea5d.png","å":"https://i0.hdslb.com/bfs/emote/06946bfe71ac48a6078a0b662181bb5cad09decc.png","æ‚çœ¼":"https://i0.hdslb.com/bfs/emote/c5c6d6982e1e53e478daae554b239f2b227b172b.png","å˜˜å£°":"https://i0.hdslb.com/bfs/emote/e64af664d20716e090f10411496998095f62f844.png","æ€è€ƒ":"https://i0.hdslb.com/bfs/emote/cfa9b7e89e4bfe04bbcd34ccb1b0df37f4fa905c.png","å†è§":"https://i0.hdslb.com/bfs/emote/fc510306bae26c9aec7e287cdf201ded27b065b9.png","ç¿»ç™½çœ¼":"https://i0.hdslb.com/bfs/emote/eba54707c7168925b18f6f8b1f48d532fe08c2b1.png","å“ˆæ¬ ":"https://i0.hdslb.com/bfs/emote/888d877729cbec444ddbd1cf4c9af155a7a06086.png","å¥‹æ–—":"https://i0.hdslb.com/bfs/emote/bb2060c15dba7d3fd731c35079d1617f1afe3376.png","å¢¨é•œ":"https://i0.hdslb.com/bfs/emote/3a03aebfc06339d86a68c2d893303b46f4b85771.png","éš¾è¿‡":"https://i0.hdslb.com/bfs/emote/a651db36701610aa70a781fa98c07c9789b11543.png","æ’‡å˜´":"https://i0.hdslb.com/bfs/emote/531863568e5668c5ac181d395508a0eeb1f0cda4.png","æŠ“ç‹‚":"https://i0.hdslb.com/bfs/emote/4c87afff88c22439c45b79e9d2035d21d5622eba.png","ç”Ÿæ°”":"https://i0.hdslb.com/bfs/emote/3195714219c4b582a4fb02033dd1519913d0246d.png","2021ä¸‡åœ£èŠ‚":"https://i0.hdslb.com/bfs/emote/0277ee5af7de1bdfc6a935b1e44b72e9ffd5ba62.png","æœˆé¥¼":"https://i0.hdslb.com/bfs/emote/89b19c5730e08d6f12fadf6996de5bc2e52f81fe.png","åŠ æ²¹æ­¦æ±‰":"https://i0.hdslb.com/bfs/emote/eb966aaa5b690d3f9308a9f936f5b5a72a7f956b.png","ç”»é£çªå˜":"https://i0.hdslb.com/bfs/emote/ba4de7a3f97644038b15195bdc9f82a8fd118e77.png","ç¦":"https://i0.hdslb.com/bfs/emote/802429a301ac5b35a0480d9526a070ce67cd8097.png","èœ¡çƒ›":"https://i0.hdslb.com/bfs/emote/1f5b25a8608046fef703620425cea9c9dc4b2206.png","tv-ç™½çœ¼":"https://i0.hdslb.com/bfs/emote/c1d59f439e379ee50eef488bcb5e5378e5044ea4.png","tv-doge":"https://i0.hdslb.com/bfs/emote/6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png","tv-åç¬‘":"https://i0.hdslb.com/bfs/emote/1f0b87f731a671079842116e0991c91c2c88645a.png","tv-éš¾è¿‡":"https://i0.hdslb.com/bfs/emote/87f46748d3f142ebc6586ff58860d0e2fc8263ba.png","tv-ç”Ÿæ°”":"https://i0.hdslb.com/bfs/emote/26702dcafdab5e8225b43ffd23c94ac1ff932654.png","tv-å§”å±ˆ":"https://i0.hdslb.com/bfs/emote/d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png","tv-æ–œçœ¼ç¬‘":"https://i0.hdslb.com/bfs/emote/911f987aa8bc1bee12d52aafe62bc41ef4474e6c.png","tv-å‘†":"https://i0.hdslb.com/bfs/emote/fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png","tv-å‘æ€’":"https://i0.hdslb.com/bfs/emote/34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png","tv-æƒŠå“":"https://i0.hdslb.com/bfs/emote/0d15c7e2ee58e935adc6a7193ee042388adc22af.png","tv-å‘•å":"https://i0.hdslb.com/bfs/emote/9f996894a39e282ccf5e66856af49483f81870f3.png","tv-æ€è€ƒ":"https://i0.hdslb.com/bfs/emote/90cf159733e558137ed20aa04d09964436f618a1.png","tv-å¾®ç¬‘":"https://i0.hdslb.com/bfs/emote/70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png","tv-ç–‘é—®":"https://i0.hdslb.com/bfs/emote/0793d949b18d7be716078349c202c15ff166f314.png","tv-å¤§å“­":"https://i0.hdslb.com/bfs/emote/23269aeb35f99daee28dda129676f6e9ea87934f.png","tv-é¼“æŒ":"https://i0.hdslb.com/bfs/emote/1d21793f96ef4e6f48b23e53e3b9e42da833a0f6.png","tv-æŠ é¼»":"https://i0.hdslb.com/bfs/emote/c666f55e88d471e51bbd9fab9bb308110824a6eb.png","tv-äº²äº²":"https://i0.hdslb.com/bfs/emote/a8111ad55953ef5e3be3327ef94eb4a39d535d06.png","tv-è°ƒçš®":"https://i0.hdslb.com/bfs/emote/b9c41de8e82dd7a8515ae5e3cb63e898bf245186.png","tv-ç¬‘å“­":"https://i0.hdslb.com/bfs/emote/1abc628f6d4f4caf9d0e7800878f4697abbc8273.png","tv-æ™•":"https://i0.hdslb.com/bfs/emote/5443c22b4d07fb1907ccc610c8e6db254f2461b7.png","tv-ç‚¹èµ":"https://i0.hdslb.com/bfs/emote/f85c354995bd99e28fc76c869bfe42ba6438eff4.png","tv-å®³ç¾":"https://i0.hdslb.com/bfs/emote/a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png","tv-ç¡ç€":"https://i0.hdslb.com/bfs/emote/8b196675b53af58264f383c50ad0945048290b33.png","tv-è‰²":"https://i0.hdslb.com/bfs/emote/61822c7e9aae5da76475e7892534545336b23a6f.png","tv-åè¡€":"https://i0.hdslb.com/bfs/emote/09dd16a7aa59b77baa1155d47484409624470c77.png","tv-æ— å¥ˆ":"https://i0.hdslb.com/bfs/emote/ea8ed89ee9878f2fece2dda0ea8a5dbfe21b5751.png","tv-å†è§":"https://i0.hdslb.com/bfs/emote/180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png","tv-æµæ±—":"https://i0.hdslb.com/bfs/emote/cead1c351ab8d79e9f369605beb90148db0fbed3.png","tv-å·ç¬‘":"https://i0.hdslb.com/bfs/emote/bb690d4107620f1c15cff29509db529a73aee261.png","tv-æŠ“ç‹‚":"https://i0.hdslb.com/bfs/emote/fe31c08edad661d63762b04e17b8d5ae3c71a757.png","tv-é»‘äººé—®å·":"https://i0.hdslb.com/bfs/emote/45821a01f51bc867da9edbaa2e070410819a95b2.png","tv-å›°":"https://i0.hdslb.com/bfs/emote/241ee304e44c0af029adceb294399391e4737ef2.png","tv-æ‰“è„¸":"https://i0.hdslb.com/bfs/emote/56ab10b624063e966bfcb76ea5dc4794d87dfd47.png","tv-é—­å˜´":"https://i0.hdslb.com/bfs/emote/c9e990da7f6e93975e25fd8b70e2e290aa4086ef.png","tv-é„™è§†":"https://i0.hdslb.com/bfs/emote/6e72339f346a692a495b123174b49e4e8e781303.png","tv-è…¼è…†":"https://i0.hdslb.com/bfs/emote/89712c0d4af73e67f89e35cbc518420380a7f6f4.png","tv-é¦‹":"https://i0.hdslb.com/bfs/emote/fc7e829b845c43c623c8b490ee3602b7f0e76a31.png","tv-å¯çˆ±":"https://i0.hdslb.com/bfs/emote/9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png","tv-å‘è´¢":"https://i0.hdslb.com/bfs/emote/34db290afd2963723c6eb3c4560667db7253a21a.png","tv-ç”Ÿç—…":"https://i0.hdslb.com/bfs/emote/8b0ec90e6b86771092a498c54f09fc94621c1900.png","tv-æµé¼»è¡€":"https://i0.hdslb.com/bfs/emote/c32d39db2737f89b904ca32700d140a9241b0767.png","tv-å°´å°¬":"https://i0.hdslb.com/bfs/emote/7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png","tv-å¤§ä½¬":"https://i0.hdslb.com/bfs/emote/093c1e2c490161aca397afc45573c877cdead616.png","tv-æµæ³ª":"https://i0.hdslb.com/bfs/emote/7e71cde7858f0cd50d74b0264aa26db612a8a167.png","tv-å†·æ¼ ":"https://i0.hdslb.com/bfs/emote/b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png","tv-çš±çœ‰":"https://i0.hdslb.com/bfs/emote/72ccad6679fea0d14cce648b4d818e09b8ffea2d.png","tv-é¬¼è„¸":"https://i0.hdslb.com/bfs/emote/0ffbbddf8a94d124ca2f54b360bbc04feb6bbfea.png","tv-è°ƒä¾ƒ":"https://i0.hdslb.com/bfs/emote/4bc022533ef31544ca0d72c12c808cf4a1cce3e3.png","tv-ç›®çªå£å‘†":"https://i0.hdslb.com/bfs/emote/0b8cb81a68de5d5365212c99375e7ace3e7891b7.png","tvgif-ç™½çœ¼":"https://i0.hdslb.com/bfs/emote/48f75163437445665a9be80bb316e4cb252c5415.gif","tvgif-doge":"https://i0.hdslb.com/bfs/emote/302d6c88c63ed162c81a49cafe7ed2709e6fb955.gif","tvgif-åç¬‘":"https://i0.hdslb.com/bfs/emote/5d2572efd09aab5dde9e2a198bb3f9ac1e2a982e.gif","tvgif-éš¾è¿‡":"https://i0.hdslb.com/bfs/emote/9c6b41008a67755410f712334c64313df5f91b3f.gif","tvgif-ç”Ÿæ°”":"https://i0.hdslb.com/bfs/emote/1902a5a2df5b5c931d88c12f0feb264b1e109d0d.gif","tvgif-å§”å±ˆ":"https://i0.hdslb.com/bfs/emote/af5a5853edb43a8178a8cb5df707fa5e88143699.gif","tvgif-æ–œçœ¼ç¬‘":"https://i0.hdslb.com/bfs/emote/c66568b471192ca1f62f6ed4384dc1b283ab7508.gif","tvgif-å‘†":"https://i0.hdslb.com/bfs/emote/d3fa91e4db9215eb1e20ab9da44f1214aa4bda7b.gif","tvgif-å‘æ€’":"https://i0.hdslb.com/bfs/emote/3959eb81b952e4fa8d269d98f9e3639172d84073.gif","tvgif-æƒŠå“":"https://i0.hdslb.com/bfs/emote/13549060757fcd92b11d0657d9b3b6038f97abb6.gif","tvgif-å‘•å":"https://i0.hdslb.com/bfs/emote/db58e9442aae26694af18cc1683607cca3a16763.gif","tvgif-æ€è€ƒ":"https://i0.hdslb.com/bfs/emote/b63f9146bfd985af014f8d6d4bdb498805be48f9.gif","tvgif-å¾®ç¬‘":"https://i0.hdslb.com/bfs/emote/b98656855d782f61cb8edc7f7fca6563ecafff7e.gif","tvgif-ç–‘é—®":"https://i0.hdslb.com/bfs/emote/fce1b1a0f3b0e39a2dc16a18508dba7b91e929f4.gif","tvgif-å¤§å“­":"https://i0.hdslb.com/bfs/emote/cba61f05f3039b02a7ffc0dfcd9d7995df9fdd74.gif","tvgif-é¼“æŒ":"https://i0.hdslb.com/bfs/emote/be106e6b265883a9f28fbe10f7b765701e2618d4.gif","tvgif-æŠ é¼»":"https://i0.hdslb.com/bfs/emote/696d9f93e722144dc2a78aeffc569418fdf3d565.gif","tvgif-äº²äº²":"https://i0.hdslb.com/bfs/emote/3534ea44ab74bd20352b88c245a06c4b4c46d271.gif","tvgif-è°ƒçš®":"https://i0.hdslb.com/bfs/emote/fcd967395fd14e4dd5829fa7e8a967ce23205e52.gif","tvgif-ç¬‘å“­":"https://i0.hdslb.com/bfs/emote/1c2fd1e8c9dde12812f86e5d4cbddd8993d98082.gif","tvgif-æ™•":"https://i0.hdslb.com/bfs/emote/030040ec5c9ddc9e3d067658c4139e7314ab42f8.gif","tvgif-ç‚¹èµ":"https://i0.hdslb.com/bfs/emote/30ecff401245fb56bcc1cf588d1809ac1ab1607c.gif","tvgif-å®³ç¾":"https://i0.hdslb.com/bfs/emote/411a3e459e8580f5bfd9f639a408247c4b509935.gif","tvgif-ç¡ç€":"https://i0.hdslb.com/bfs/emote/3c8b5e293261287a6203597e29b3de07df4d18c6.gif","tvgif-è‰²":"https://i0.hdslb.com/bfs/emote/a0c6d99ab0ab63b8648f5283ff72cec04b604828.gif","tvgif-åè¡€":"https://i0.hdslb.com/bfs/emote/e17e4539e169d14a3389ff147afea760cebe5de5.gif","tvgif-æ— å¥ˆ":"https://i0.hdslb.com/bfs/emote/eb4cb5f07cfd177c7e6a7914316717e56d9cc1d0.gif","tvgif-å†è§":"https://i0.hdslb.com/bfs/emote/344f61609ecce2008520dc8a977b6169215748a9.gif","tvgif-æµæ±—":"https://i0.hdslb.com/bfs/emote/390bccec65eaff536bd5bb2a0c5b8b0bdea47334.gif","tvgif-å·ç¬‘":"https://i0.hdslb.com/bfs/emote/7f11e6f7f63e79112b833bd41fa13a83d7cd8474.gif","tvgif-æŠ“ç‹‚":"https://i0.hdslb.com/bfs/emote/a476b93ecd8e94ac3257323fd822f91cef212de2.gif","tvgif-é»‘äººé—®å·":"https://i0.hdslb.com/bfs/emote/b609adf664be33224a9923262031165ae3e34cd2.gif","tvgif-å›°":"https://i0.hdslb.com/bfs/emote/91c2bf34ecf842d7016c01d841db3d4074bd281f.gif","tvgif-æ‰“è„¸":"https://i0.hdslb.com/bfs/emote/b0fad4856e59c1240e448437da3287bb5ce547e5.gif","tvgif-é—­å˜´":"https://i0.hdslb.com/bfs/emote/a3fc5388b09e945be3f18fe23bfed5874a0285b7.gif","tvgif-é„™è§†":"https://i0.hdslb.com/bfs/emote/293b5d459e6264ecf314d20937a936fa672ccd1e.gif","tvgif-è…¼è…†":"https://i0.hdslb.com/bfs/emote/30984e8264324f901d19bea85dada7103b695534.gif","tvgif-é¦‹":"https://i0.hdslb.com/bfs/emote/2525c5703c594e5f0752f68db8948773caebde47.gif","tvgif-å¯çˆ±":"https://i0.hdslb.com/bfs/emote/f92d20f76258bc5f33fc9d7c5e2a1d41fef19a7c.gif","tvgif-å‘è´¢":"https://i0.hdslb.com/bfs/emote/76131e52c9b033681b4c896c6024d29ef7ec7ec2.gif","tvgif-ç”Ÿç—…":"https://i0.hdslb.com/bfs/emote/beb94829fe04f1a41bd6ca611e1f6ca9ca169afa.gif","tvgif-æµé¼»è¡€":"https://i0.hdslb.com/bfs/emote/8ef473f74a849420da712487b2f56ecca1f695f5.gif","tvgif-å°´å°¬":"https://i0.hdslb.com/bfs/emote/e0b84ef5ee3e5b8978e584c7c5a6550c51d15f84.gif","tvgif-å¤§ä½¬":"https://i0.hdslb.com/bfs/emote/14ca0c05382b8741940942b2430b7a8d55c02f7e.gif","é…·ä»”":"https://i0.hdslb.com/bfs/emote/390100ada4659b4516984d386499fb22c0025084.png","èµäº†":"https://i0.hdslb.com/bfs/emote/40ded585bbd6328fc390076b5de224fd38b46793.png","æš—ä¸­è§‚å¯Ÿ":"https://i0.hdslb.com/bfs/emote/80a752e0718db211e4135b4ba821813f4c151e2c.png","ä¹ˆä¹ˆå“’":"https://i0.hdslb.com/bfs/emote/2f418440776e88605ddc426eac898202c1f5fa4d.png","å“­å“­":"https://i0.hdslb.com/bfs/emote/cbf36e518f1d50618f6d054aa69993ecc339fe8f.png","é¥¿äº†":"https://i0.hdslb.com/bfs/emote/ff91ea94adf7c5b04db305c18d17b444f7360059.png","é—®å·":"https://i0.hdslb.com/bfs/emote/a905b58b32016a1f0ff7d9193b62749f0d491707.png","å˜¿å˜¿":"https://i0.hdslb.com/bfs/emote/8a15a45e228179f912ce11dbd5478f6ad54e9854.png","å–èŒ":"https://i0.hdslb.com/bfs/emote/a0d37b43d1e786ba811d9b0ae590c479dcce6c44.png","å–µ":"https://i0.hdslb.com/bfs/emote/eb46e78c9d86ccbe9842f0235c7cb4f4e0e80a57.png","å°ç”µè§†-ç¬‘":"https://i0.hdslb.com/bfs/emote/f80d384875183dfe2e24be13011c595c0210d273.png","å°ç”µè§†-å‘æ„":"https://i0.hdslb.com/bfs/emote/05e279abbf3f72d5cc45548504a4220c5514b8b9.png","å°ç”µè§†-èµ":"https://i0.hdslb.com/bfs/emote/86ccf6d0b5480169bf80f3582fae09d7ed455c06.png","å°ç”µè§†-å·®è¯„":"https://i0.hdslb.com/bfs/emote/38456e3bde2839b00b536a8be13934fa57c8e298.png","å°ç”µè§†-å˜Ÿå˜´":"https://i0.hdslb.com/bfs/emote/6fd437f547ef1e4f231ff475d02f58bb94cef5a5.png","å°ç”µè§†-æ±—":"https://i0.hdslb.com/bfs/emote/5c150cec77eae1b05d5ca46526450ff3beeb44d2.png","å°ç”µè§†-å®³ç¾":"https://i0.hdslb.com/bfs/emote/de3aee88f7b6cc20ba9480c96c02f83a844381a9.png","å°ç”µè§†-åƒæƒŠ":"https://i0.hdslb.com/bfs/emote/05188008ea84c70d94e0076e28de15bf56f4c441.png","å°ç”µè§†-å“­æ³£":"https://i0.hdslb.com/bfs/emote/938bdf98df945576ae88e2a22931db07ded9e663.png","å°ç”µè§†-å¤ªå¤ªå–œæ¬¢":"https://i0.hdslb.com/bfs/emote/eb41a8c04840e4f77e76a4bff7a29ac89c432f4e.png","å°ç”µè§†-å¥½æ€’å•Š":"https://i0.hdslb.com/bfs/emote/68d524b7e515396b6563d320fb710c64abfb1063.png","å°ç”µè§†-å›°æƒ‘":"https://i0.hdslb.com/bfs/emote/6853161f0eab3332b874ab7c6c0311035b7538f3.png","å°ç”µè§†-æˆ‘å¥½å…´å¥‹":"https://i0.hdslb.com/bfs/emote/a695fe1301aab2675ab6f6e34757c25a863a8617.png","å°ç”µè§†-æ€ç´¢":"https://i0.hdslb.com/bfs/emote/f8219e484d5a55787c3f1722dc3112d0eba03a69.png","å°ç”µè§†-æ— è¯­":"https://i0.hdslb.com/bfs/emote/fbd12affebfdaadd3d721bffdb685a6b1ee71219.png","2233å¨˜-å¤§ç¬‘":"https://i0.hdslb.com/bfs/emote/16b8794be990cefa6caeba4d901b934a227ee3b8.png","2233å¨˜-åƒæƒŠ":"https://i0.hdslb.com/bfs/emote/d1628c43d35b1530c0504a643ff80b6189fa0a43.png","2233å¨˜-å¤§å“­":"https://i0.hdslb.com/bfs/emote/476a2a60f6e337b8c0697a592e0aa82781f6b33b.png","2233å¨˜-è€¶":"https://i0.hdslb.com/bfs/emote/d7178e258a0efc969b65ccc2b1322fb235f5dff4.png","2233å¨˜-å–èŒ":"https://i0.hdslb.com/bfs/emote/ea893aa25355de95ab4f03c2dad3f0c58d0c159e.png","2233å¨˜-ç–‘é—®":"https://i0.hdslb.com/bfs/emote/0b41f509351958dbb63d472fec0132d1bd03bd14.png","2233å¨˜-æ±—":"https://i0.hdslb.com/bfs/emote/247cd9df8cdf84b18368c21e3b2dd374e84c0927.png","2233å¨˜-å›°æƒ‘":"https://i0.hdslb.com/bfs/emote/714eeb4eae0d0933b4ff08b7df788b1982f6b940.png","2233å¨˜-æ€’":"https://i0.hdslb.com/bfs/emote/f31953119c51b9748016440ac0b632f779929b37.png","2233å¨˜-å§”å±ˆ":"https://i0.hdslb.com/bfs/emote/d9d0bf9d358af8d5761093ec66d4e3f60d963a63.png","2233å¨˜-éƒé—·":"https://i0.hdslb.com/bfs/emote/485203fe7100f2c8fc40b2800a18fe20b35f2f1a.png","2233å¨˜-ç¬¬ä¸€":"https://i0.hdslb.com/bfs/emote/3754ee6e5985bd0bd7dfb668981f2a8733398ebd.png","2233å¨˜-å–æ°´":"https://i0.hdslb.com/bfs/emote/695bf5429472049b52c1e0de586f8a2511195a23.png","2233å¨˜-åé­‚":"https://i0.hdslb.com/bfs/emote/e999af499edf38a91ca68b1a9d2f97042c1d6734.png","2233å¨˜-æ— è¨€":"https://i0.hdslb.com/bfs/emote/fdb5870f32cfaf7949e0f88a13f6feba4a48b719.png","è›†éŸ³å¨˜-å–èŒ":"https://i0.hdslb.com/bfs/emote/4cd1024d0c2ecee93224477946656d32c1705ccf.png","è›†éŸ³å¨˜-åƒç“œç¾¤ä¼—":"https://i0.hdslb.com/bfs/emote/5d0d6cc54b508d30b4f50b6b5f7b7e1e259d84ea.png","è›†éŸ³å¨˜-åƒæƒŠ":"https://i0.hdslb.com/bfs/emote/7a4cb0b644214d476ce198ddf6a7a0aa31311199.png","è›†éŸ³å¨˜-å®³æ€•":"https://i0.hdslb.com/bfs/emote/7407634bf67bfe9d7806f15d57608a1b18c2b4c2.png","è›†éŸ³å¨˜-æ‰¶é¢":"https://i0.hdslb.com/bfs/emote/a4d8f95baaa24821fd591a7dbeee1b869e760f59.png","è›†éŸ³å¨˜-æ»‘ç¨½":"https://i0.hdslb.com/bfs/emote/d3717f10ffe9787336bc39a09214270988521a67.png","è›†éŸ³å¨˜-å“¼":"https://i0.hdslb.com/bfs/emote/8854f1b8a82126e3b87f3a1563da5feb55b23e71.png","è›†éŸ³å¨˜-æœºæ™º":"https://i0.hdslb.com/bfs/emote/e543c0a823ca915df9362283f4ae950e9e9cc2e9.png","è›†éŸ³å¨˜-å“­æ³£":"https://i0.hdslb.com/bfs/emote/a23055546c19eba663b16370b8e072394d87ff53.png","è›†éŸ³å¨˜-ç¡è§‰è§‰":"https://i0.hdslb.com/bfs/emote/40ef7e6d931acb37e5514b70d13663e86dc3698b.png","è›†éŸ³å¨˜-ç”Ÿæ°”":"https://i0.hdslb.com/bfs/emote/bf398cbbcfaae107d1b59aaf03895f38422e3d87.png","è›†éŸ³å¨˜-å·çœ‹":"https://i0.hdslb.com/bfs/emote/52463ded4f23649db10ba3ced662ed946c5edf0b.png","è›†éŸ³å¨˜-åè¡€":"https://i0.hdslb.com/bfs/emote/5772d22015e5b2b40a9fe302b5967ec7282ac848.png","è›†éŸ³å¨˜-æ— è¯­":"https://i0.hdslb.com/bfs/emote/b6c763c6484ce2e48299ceb21861e46318868871.png","è›†éŸ³å¨˜-æ‘‡å¤´":"https://i0.hdslb.com/bfs/emote/b7278f750c6f2235f41f37056d727f25d3bf781f.png","è›†éŸ³å¨˜-ç–‘é—®":"https://i0.hdslb.com/bfs/emote/7750b698d15a1b8e83c0f59106e8e9cd5cb57897.png","è›†éŸ³å¨˜-die":"https://i0.hdslb.com/bfs/emote/52543025a070fde5c01a10320c9636ec3173ac99.png","è›†éŸ³å¨˜-OK":"https://i0.hdslb.com/bfs/emote/52a0dcee66c91bf123bf53bd48a269b1317d17f9.png","è›†éŸ³å¨˜-è‚¥çš‚":"https://i0.hdslb.com/bfs/emote/7f1a857e9430dcf3050ce0ef5fa19aefebea6dc4.png","è›†éŸ³å¨˜-å¤§ç¬‘":"https://i0.hdslb.com/bfs/emote/1d3355fb89c24ab3c50e5c152d8b990a290dc63e.png","èŠ®å°å‡¸å°å‡¹-å—¯ï¼Ÿ":"https://i0.hdslb.com/bfs/emote/f3c72e045ebd2487a381f50291be15b053767a80.png","èŠ®å°å‡¸å°å‡¹-è¶…æ£’":"https://i0.hdslb.com/bfs/emote/987947c1bdac0bc10b684f28baaec78176023b83.png","èŠ®å°å‡¸å°å‡¹-å“":"https://i0.hdslb.com/bfs/emote/38bcf3a53b34551e5efa0cd0ee84fc7faa477a49.png","èŠ®å°å‡¸å°å‡¹-666":"https://i0.hdslb.com/bfs/emote/3e505cef421024a650b971c1f2db7f8ef1ad1840.png","èŠ®å°å‡¸å°å‡¹-å“¼":"https://i0.hdslb.com/bfs/emote/92e4a9d422f1604f2b1b3ea3f6057636273db56e.png","èŠ®å°å‡¸å°å‡¹-æ€€ç–‘":"https://i0.hdslb.com/bfs/emote/587f22aa1cfaa4b2d91928998e023be29d8c3975.png","èŠ®å°å‡¸å°å‡¹-å‘ç°":"https://i0.hdslb.com/bfs/emote/147b6ba27d5cbb90d155f34c41cb45f1f00b6007.png","èŠ®å°å‡¸å°å‡¹-ç»æœ›":"https://i0.hdslb.com/bfs/emote/22ad072a785604f3bd8c1aae4ea1ceb1e4694cec.png","èŠ®å°å‡¸å°å‡¹-å¯çˆ±":"https://i0.hdslb.com/bfs/emote/8bddb47b5877fd79e937aafeb7f4d69f58a8b6e4.png","èŠ®å°å‡¸å°å‡¹-è­¦å‘Š":"https://i0.hdslb.com/bfs/emote/54607206c814409a99fac65fb3b780c6bbd1e60d.png","èŠ®å°å‡¸å°å‡¹-å‘µå‘µ":"https://i0.hdslb.com/bfs/emote/811aa3ba5809a8d5936f988f953e5af7fd7c5351.png","èŠ®å°å‡¸å°å‡¹-è†œæ‹œ":"https://i0.hdslb.com/bfs/emote/038c86c0e616f7ead667c6f7af32e54feac32965.png","èŠ®å°å‡¸å°å‡¹-å“­":"https://i0.hdslb.com/bfs/emote/000c0dddd08950133740487a57873b389a3af457.png","èŠ®å°å‡¸å°å‡¹-æ— èŠ":"https://i0.hdslb.com/bfs/emote/62527ee5c4e80aad9b42069778c91f905c90d986.png","èŠ®å°å‡¸å°å‡¹-å›´è§‚":"https://i0.hdslb.com/bfs/emote/c9b4fe6161f4a3cc884a5b03e9674c8a58ee228f.png","èŠ®å°å‡¸å°å‡¹-å¤±è½":"https://i0.hdslb.com/bfs/emote/813f98c0632587286c6e809a49eda15a2edfa447.png","èŠ®å°å‡¸å°å‡¹-æ˜¯å—":"https://i0.hdslb.com/bfs/emote/05b7153fb606e526ce8d102febd25889828ce425.png","èŠ®å°å‡¸å°å‡¹-å¿ƒåŠ¨":"https://i0.hdslb.com/bfs/emote/24afe39fbf8755a28673bdf51bdf8ce72bc62d51.png","èŠ®å°å‡¸å°å‡¹-å–œæ¬¢":"https://i0.hdslb.com/bfs/emote/b389e30a3c7924ca2b59a5333412b8d92cad07df.png","èŠ®å°å‡¸å°å‡¹-å˜»å˜»":"https://i0.hdslb.com/bfs/emote/b7a4a07a7c24f5fa23a99ca6749708fadfedf765.png","èŠ®å°å‡¸å°å‡¹-éœ‡æ’¼":"https://i0.hdslb.com/bfs/emote/79c8b68509a9d316618d61aedaae93097669dae6.png","èŠ®å°å‡¸å°å‡¹-æœ‰è§è§£":"https://i0.hdslb.com/bfs/emote/7f842228b9a2c36851cecab0527fca55a1f01b58.png","èŠ®å°å‡¸å°å‡¹-éœ‡æƒŠ":"https://i0.hdslb.com/bfs/emote/be4b48350b817af496bdccba2ab85c77b711cec3.png","èŠ®å°å‡¸å°å‡¹-å¿ƒç—›":"https://i0.hdslb.com/bfs/emote/b2217e8b81f122949f3960d99c08ac72eac5923b.png","å·¥ä½œç»†èƒ-æ¬ç –":"https://i0.hdslb.com/bfs/emote/3058ff55e1c8ed84af46a5851785aaedd75b9457.png","å·¥ä½œç»†èƒ-åˆ«æ‹…å¿ƒ":"https://i0.hdslb.com/bfs/emote/06f0827e45ba2d8ead9617dc93f6ac5fecf43054.png","å·¥ä½œç»†èƒ-åˆ«æ€‚":"https://i0.hdslb.com/bfs/emote/fbbb9574837d64012c2f26f9faf18504fe860ba2.png","å·¥ä½œç»†èƒ-å†²é¸­":"https://i0.hdslb.com/bfs/emote/29beaae54921b9cd99d7d7cf82a8b51d647e329e.png","å·¥ä½œç»†èƒ-æˆ³æˆ³":"https://i0.hdslb.com/bfs/emote/b4bef418e0737dfb336bb85c9a032bd6731b1024.png","å·¥ä½œç»†èƒ-æ‰“æ‰°äº†":"https://i0.hdslb.com/bfs/emote/17b60cb5ed56b5c3bcc6ee374e86ce3884e04a8a.png","å·¥ä½œç»†èƒ-æ ¸å¼¹å¼€å…³":"https://i0.hdslb.com/bfs/emote/8bb6903caf1498dee5b362749da2261853449f9b.png","å·¥ä½œç»†èƒ-åŠ æ²¹":"https://i0.hdslb.com/bfs/emote/c4f09e4cde7cb8b8f2a831750f2aef9b4ab8144d.png","å·¥ä½œç»†èƒ-äº¤ç»™æˆ‘":"https://i0.hdslb.com/bfs/emote/ae585bc6e0fe41f12fa7812d36f35587fdd459c2.png","å·¥ä½œç»†èƒ-æƒŠå“":"https://i0.hdslb.com/bfs/emote/1c28e19390090fd4ea70186fde4064c409c27537.png","å·¥ä½œç»†èƒ-éœ‰èŒå†è§":"https://i0.hdslb.com/bfs/emote/8d34f746dd6af644ea529b256c6f94602a1dc49f.png","å·¥ä½œç»†èƒ-è¿·è·¯":"https://i0.hdslb.com/bfs/emote/ea04896151334d7210a7117e21de24f80dcff773.png","å·¥ä½œç»†èƒ-åŠªåŠ›å·¥ä½œ":"https://i0.hdslb.com/bfs/emote/77e3b4f8811e13c68480051a01e29393f4f35457.png","å·¥ä½œç»†èƒ-å‰æ–¹æ–½å·¥":"https://i0.hdslb.com/bfs/emote/b443b8daf8d12df26a8e4f92a63028e4da584bcf.png","å·¥ä½œç»†èƒ-é—ªäº®ç™»åœº":"https://i0.hdslb.com/bfs/emote/a1eb51316498efe0d50419c05c2f73d681ea08e7.png","å·¥ä½œç»†èƒ-ç¤¾æ­»":"https://i0.hdslb.com/bfs/emote/d41ef6665f1227580be60343ac6fdb454b88eafe.png","å·¥ä½œç»†èƒ-å›¢å»º":"https://i0.hdslb.com/bfs/emote/495a6cc5529bb64933a464a5160ae61ae35481c3.png","å·¥ä½œç»†èƒ-æƒ³ä¸èµ·æ¥":"https://i0.hdslb.com/bfs/emote/dda84a1500a5a9af131cc265079a01f25c34c577.png","å·¥ä½œç»†èƒ-è¾›è‹¦äº†":"https://i0.hdslb.com/bfs/emote/c34d1b2409bc5c7161c4d46543a79d3e27c09fac.png","å·¥ä½œç»†èƒ-ä¸­æš‘":"https://i0.hdslb.com/bfs/emote/1486b91e70d5dcdb50ac7f36cbb9603a62ca06a4.png"},
      path: window.location.pathname,
      visitor: true
    }, {"placeholder":"è¦ä¸æ‰“ç‚¹ä»€ä¹ˆçš„ä¸œè¥¿?","recordIP":true,"enableQQ":true,"emojiCDN":"https://i0.hdslb.com/bfs/emote/"}))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/gh/HCLonely/Valine@latest/dist/Valine.min.js').then(initValine)
}

if ('Twikoo' === 'Valine' || !false) {
  if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[å›¾ç‰‡]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[é“¾æ¥]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[ä»£ç ]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://blog-twikoo-ten.vercel.app',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "æ— æ³•è·å–è¯„è®ºï¼Œè¯·ç¡®è®¤ç›¸å…³é…ç½®æ˜¯å¦æ­£ç¡®"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += 'æ²¡æœ‰è¯„è®º'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><div class="aplayer no-destroy" data-id="7498303030" data-server="netease" data-type="playlist" data-fixed="true" data-mini="true" data-autoplay="true"> </div><canvas class="fireworks" mobile="true"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script>(function(d, w, c) {
    w.ChatraID = 'M5fnBvYBprT64WyMZ';
    var s = d.createElement('script');
    w[c] = w[c] || function() {
        (w[c].q = w[c].q || []).push(arguments);
    };
    s.async = true;
    s.src = 'https://call.chatra.io/chatra.js';
    if (d.head) d.head.appendChild(s);
})(document, window, 'Chatra');

if (true) {
  var chatBtnFn = () => {
    var chatBtn = document.getElementById("chat_btn")
    chatBtn.addEventListener("click", function(){
      Chatra('openChat')
    });
  }
  chatBtnFn()
} else {
  if (true) {
    function chatBtnHide () {
      Chatra('hide')
    }
    function chatBtnShow () {
      Chatra('show')
    }
  }
}</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>